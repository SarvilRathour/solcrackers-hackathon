<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Form</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="hud">
        <nav class="hud-left">
            <a href="#" class="play-button">üîç SEARCH</a>
            <a href="#">TOUR 2025</a>
            <a href="#">SHOP</a>
            <a href="#">ABOUT US</a>
        </nav>

        <div class="hud-center">
            <h1 class="logo">WELCOME<br><span>HOME</span></h1>
        </div>

        <div class="hud-right">
            <div class="now-playing">
                <span>NOW PLAYING: YAME - BIZARRE (INSTRUMENTAL)</span>
                <div class="progress-bar">ON [ ‚ñ¨‚ñ¨‚ñ¨ ] OFF</div>
            </div>
            <div id="hud-icons">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 15H9V19H5V15ZM15 5H19V9H15V5ZM5 5H9V9H5V5ZM15 15H19V19H15V15Z" stroke="white"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </div>
        </div>
    </header>
    <main class="world">
       <form method="POST" class="input_data" action="http://localhost:3000/api/bookings">
    <h2>Create Booking</h2>

   <div class="data_input">
    <div class="input-group">
        <label for="slot_id">Slot ID:</label>
        <input type="text" id="slot_id" name="slot_id" required>
    </div>

    <div class="input-group">
        <label for="ev_id">EV ID:</label>
        <input type="text" id="ev_id" name="ev_id" required>
    </div>

    <div class="input-group">
        <label for="arrival_time">Arrival Time:</label>
        <input type="datetime-local" id="arrival_time" name="arrival_time" required>
    </div>

    <div class="input-group">
        <label for="duration">Duration (minutes):</label>
        <input type="number" id="duration" name="duration" min="1" required>
    </div>

    <div class="input-group">
        <label for="power_needed">Power Needed (kW):</label>
        <input type="number" id="power_needed" name="power_needed" min="1" required>
    </div>

    <button id="create-booking">Create Booking</button>
</div>

<script>
document.getElementById("create-booking").addEventListener("click", async () => {
    const slot_id = document.getElementById("slot_id").value;
    const ev_id = document.getElementById("ev_id").value;
    const arrival_time = document.getElementById("arrival_time").value;
    const duration = parseInt(document.getElementById("duration").value);
    const power_needed = parseInt(document.getElementById("power_needed").value);

    if (!slot_id || !ev_id || !arrival_time || !duration || !power_needed) {
        alert("Please fill in all fields!");
        return;
    }

    try {
        const response = await fetch("http://localhost:3000/api/bookings", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                slot_id,
                ev_id,
                arrival_time,
                duration,
                power_needed
            })
        });

        if (!response.ok) throw new Error("Failed to create booking");

        alert("Booking created successfully!");
        // Optionally, clear inputs
        document.getElementById("slot_id").value = "";
        document.getElementById("ev_id").value = "";
        document.getElementById("arrival_time").value = "";
        document.getElementById("duration").value = "";
        document.getElementById("power_needed").value = "";
    } catch (err) {
        console.error(err);
        alert("Error creating booking. See console for details.");
    }
});
</script>


    <button type="submit">Create Booking</button>
</form>

    </main>
    <footer class="controls">
        <div class="controls-left">
            <span>All rights reserved.</span>
            <a href="#">Terms of use</a>
            <a href="#">Privacy policy</a>
            <a href="#">Credits</a>
        </div>

        <div class="controls-center">
            <div class="scroll-prompt">
                <span class="arrow">‚ü©‚ü©</span>
                <span>
                    <a href="./data.html">
                        CLICK TO EXPLORE

                    </a>
                </span>
                <span class="arrow">‚ü®‚ü®</span>
            </div>
        </div>

        <div class="controls-right">
            <a href="#" class="cta-link">JOIN THE MOLAZONE ‚Ä∫</a>
            <div class="social-icons">
                <span>üì∑</span>
                <span>üéµ</span>
            </div>
            <div class="lang-switcher">
                <a href="#" class="active">EN</a> | <a href="#">FR</a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>

</html>
